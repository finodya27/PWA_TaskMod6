{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";// Components\nimport Card from\"../components/card\";import Modal from\"../components/modal\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function LandingPage(){const[data,setData]=useState(null);const[isLoaded,setisLoaded]=useState(false);const[isLoading,setIsLoading]=useState(false);const[query,setQuery]=useState(\"One Piece\");// Modal\nconst[modalShow,setModalShow]=useState(false);const[modalItem,setModalItem]=useState(null);useEffect(()=>{const fetchData=async query=>{setIsLoading(true);try{const response=await axios.get(\"https://imdb8.p.rapidapi.com/auto-complete\",{params:{q:query},headers:{\"x-rapidapi-host\":\"imdb8.p.rapidapi.com\",\"x-rapidapi-key\":\"5bc461e5e6msh1f837c4dfd8a1e3p1518d9jsn512e9d166e76\"}});if(response.status===200){setData(response.data);setisLoaded(true);setIsLoading(false);}}catch(err){console.log(err);setIsLoading(false);}};if(!isLoaded){fetchData(query);}},[isLoaded,query]);const onSearch=e=>{if(e.key===\"Enter\"){setisLoaded(false);setQuery(e.target.value);}};const handleClick=item=>{setModalShow(!modalShow);setModalItem(item);};return/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search film by name\",onKeyDown:e=>onSearch(e)}),/*#__PURE__*/_jsxs(\"h3\",{className:\"title\",children:[\"Search : \",query]}),!data||isLoading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):/*#__PURE__*/_jsx(\"div\",{className:\"card-container\",children:data.d.map((item,index)=>{return/*#__PURE__*/_jsx(Card,{data:item,onClick:()=>handleClick(item)},index);})}),/*#__PURE__*/_jsx(Modal,{data:modalItem,isShow:modalShow,onCancel:()=>setModalShow(false)})]});}","map":{"version":3,"names":["React","useState","useEffect","axios","Card","Modal","jsx","_jsx","jsxs","_jsxs","LandingPage","data","setData","isLoaded","setisLoaded","isLoading","setIsLoading","query","setQuery","modalShow","setModalShow","modalItem","setModalItem","fetchData","response","get","params","q","headers","status","err","console","log","onSearch","e","key","target","value","handleClick","item","children","type","placeholder","onKeyDown","className","d","map","index","onClick","isShow","onCancel"],"sources":["C:/Users/finod/prak ppb/modul6-kel02-pwa2/src/pages/LandingPage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\n\r\n// Components\r\nimport Card from \"../components/card\";\r\nimport Modal from \"../components/modal\";\r\n\r\n\r\nexport default function LandingPage() {\r\n    const [data, setData] = useState(null);\r\n    const [isLoaded, setisLoaded] = useState(false);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [query, setQuery] = useState(\"One Piece\");\r\n    \r\n    // Modal\r\n    const [modalShow, setModalShow] = useState(false);\r\n    const [modalItem, setModalItem] = useState(null);\r\n    \r\n    useEffect(() => {\r\n        const fetchData = async (query) => {\r\n        setIsLoading(true);\r\n        try {\r\n            const response = await axios.get(\r\n                \"https://imdb8.p.rapidapi.com/auto-complete\",{\r\n                params: { q: query },\r\n                headers: {\r\n                    \"x-rapidapi-host\": \"imdb8.p.rapidapi.com\",\r\n                    \"x-rapidapi-key\": \"5bc461e5e6msh1f837c4dfd8a1e3p1518d9jsn512e9d166e76\",\r\n                },\r\n                }\r\n            );\r\n            if (response.status === 200) {\r\n                setData(response.data);\r\n                setisLoaded(true);\r\n                setIsLoading(false);\r\n            }\r\n        } catch (err) {\r\n        console.log(err);\r\n        setIsLoading(false);\r\n        }\r\n        };\r\n    if (!isLoaded) {\r\n    fetchData(query);\r\n    }\r\n    }, [isLoaded, query]);\r\n        const onSearch = (e) => {\r\n        if (e.key === \"Enter\") {\r\n        setisLoaded(false);\r\n        setQuery(e.target.value);\r\n    }\r\n    };\r\n    const handleClick = (item) => {\r\n        setModalShow(!modalShow);\r\n        setModalItem(item);\r\n    };\r\n    return (\r\n        <main>\r\n            <input\r\n                type=\"text\"\r\n                placeholder=\"Search film by name\"\r\n                onKeyDown={(e) => onSearch(e)}\r\n            />\r\n            <h3 className=\"title\">Search : {query}</h3>\r\n            {!data || isLoading ? (\r\n                <p>Loading...</p>\r\n            ) : (\r\n                <div className=\"card-container\">\r\n                {data.d.map((item, index) => {\r\n                    return (\r\n                    <Card data={item} key={index} onClick={()=>handleClick(item)} />\r\n                    );\r\n                })}\r\n                </div>\r\n            )}\r\n            <Modal\r\n                data={modalItem}\r\n                isShow={modalShow}\r\n                onCancel={() => setModalShow(false)}\r\n            />\r\n        </main>\r\n    );\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}